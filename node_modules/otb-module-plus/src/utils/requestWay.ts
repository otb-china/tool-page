import request from "./request"
import { defaultUrls } from "./defaultApiUrls"
import { RSA, RSS } from "./type"

let urls: RSS = { ...defaultUrls }

export const setUrls = (newUrls: RSS) => {
  urls = { ...defaultUrls, ...newUrls }
}

interface Props {
  P?: RSA
  D?: RSA
}

export const RESTFul = (
  method: string,
  name: string,
  params: string | number,
  props: Props
) => {
  return request({
    url: `${urls[name]}/${params}`,
    method,
    params: props?.P,
    data: props?.D
  })
}

export const head = (method: string, name: string, params?: unknown) => {
  return request({
    url: urls[name],
    method,
    params
  })
}

export const body = (method: string, name: string, data: unknown) => {
  return request({
    url: urls[name],
    method,
    data
  })
}
